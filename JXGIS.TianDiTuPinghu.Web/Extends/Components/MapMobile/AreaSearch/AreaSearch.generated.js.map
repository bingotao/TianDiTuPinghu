{"version":3,"file":"E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\MapMobile\\AreaSearch\\AreaSearch.jsx","sourceRoot":null,"sources":["E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\MapMobile\\AreaSearch\\AreaSearch.jsx"],"sourcesContent":["class AreaSearch extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            visible: false,\r\n            searchText: \"\",\r\n            positionText: \"\"\r\n        };\r\n        this.map = props.map;\r\n        this.resultPanel = props.resultPanel;\r\n        this.resultPanel.areaSearch = this;\r\n        this.latlng = null;\r\n    }\r\n\r\n    search(item) {\r\n        var s = this.state;\r\n        this._search(s.searchText, item.codes);\r\n    }\r\n\r\n    _search(text, categories) {\r\n        this.resultPanel.search(text, categories, 0, this.latlng);\r\n        this.hidden();\r\n    }\r\n\r\n    show(positionText, latlng) {\r\n        this.positionText = positionText || this.positionText;\r\n        this.latlng = latlng || this.latlng;\r\n        var obj = { visible: true };\r\n        if (positionText) {\r\n            obj.positionText = \"“\" + positionText + (positionText.indexOf('附近') < 0 ? '（附近）' : '') + \"”\";\r\n        }\r\n        this.setState(obj);\r\n    }\r\n\r\n    hidden(clear) {\r\n        this.setState({ visible: false });\r\n        if (!!clear) {\r\n            this.resultPanel.clearPOILayer();\r\n        }\r\n    }\r\n\r\n    toggleVisible() {\r\n        this.setState({ visible: !this.state.visible });\r\n    }\r\n\r\n    render() {\r\n        var s = this.state;\r\n        var categories = this.props.categories;\r\n        var cCategories = [];\r\n        for (var i = 0, l = categories.length; i<l;i++) {\r\n            var c = categories[i];\r\n            cCategories.push(<AreaSearchCategory parent={this} category={c } />);\r\n        }\r\n\r\n        return (\r\n        <div className={\"areasearch \" + (s.visible ? \"active\" : \"\")}>\r\n            <div className=\"areasearchgroup\">\r\n                <div className=\"areasearchgroup-fallback\">\r\n                    <antd.Icon type=\"left\" onClick={this.hidden.bind(this)} />\r\n                </div>\r\n                <antd.SearchBar placeholder={\"搜索\" + s.positionText}\r\n                cancelText=\"搜索\"\r\n                onChange={t=>this.setState({ searchText: t })}\r\n                onCancel={e=> { this._search(this.state.searchText, null, 0); this.hidden(); }} />\r\n            </div>\r\n            {cCategories}\r\n        </div>);\r\n    }\r\n}\r\n\r\nclass AreaSearchCategory extends React.Component {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    render() {\r\n        var c = this.props.category;\r\n        var subs = c.sub;\r\n        var cSubs = [];\r\n        for (var i = 0, l = subs.length; i<l;i++) {\r\n\r\n            var s = subs[i];\r\n            cSubs.push(<AreaSearchCategoryItem parent={this} item={s } />);\r\n        }\r\n        return (\r\n        <div className=\"areasearchcategory\">\r\n            <h3 style={{ borderLeft: (\"6px solid \" + c.color) } }>{c.name}</h3>\r\n            <div>\r\n                {cSubs}\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nclass AreaSearchCategoryItem extends React.Component {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    render() {\r\n        var item = this.props.item;\r\n        return (\r\n            <span onClick={e=>this.props.parent.props.parent.search(this.props.item)}>\r\n                {item.name}\r\n            </span>);\r\n    }\r\n}"],"names":[],"mappings":"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"}