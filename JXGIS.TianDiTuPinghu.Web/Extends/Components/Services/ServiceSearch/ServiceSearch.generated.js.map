{"version":3,"file":"E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Services\\ServiceSearch\\ServiceSearch.jsx","sourceRoot":null,"sources":["E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Services\\ServiceSearch\\ServiceSearch.jsx"],"sourcesContent":["class ServiceSearchBar extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            searchText: \"\",\r\n            btnClearVisible: false\r\n        }\r\n    }\r\n\r\n    getSearchText() {\r\n        return this.state.searchText;\r\n    }\r\n\r\n    clearSearchText() {\r\n        this.setState({ searchText: \"\" });\r\n    }\r\n\r\n    toggleClearBtn() {\r\n        this.setState({ btnClearVisible: !this.state.btnClearVisible });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <div className=\"serivce-searchbar\">\r\n            <antd.Input.Group>\r\n                <antd.Input ref=\"input\" onChange={e=>this.setState({ searchText: e.target.value })} value={this.state.searchText} onFocus={e=>this.toggleClearBtn()} onBlur={e=>this.toggleClearBtn()} size=\"large\" placeholder=\"搜索服务...\" />\r\n                    <antd.Icon onClick={this.clearSearchText.bind(this)} className={\"btn-search-clear \" + (this.state.btnClearVisible ?  \"active\" : \"\")} type=\"close-circle\" />\r\n                        <div className=\"ant-input-group-wrap\">\r\n                            <antd.Button onClick={this.props.search} type=\"primary\" icon=\"search\" size=\"large\" />\r\n                        </div>\r\n            </antd.Input.Group>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ServiceResults extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            services: props.services || []\r\n        };\r\n    }\r\n\r\n    filter(categories, searchText) {\r\n        var types = [];\r\n        var dataTypes = [];\r\n        for (var i = 0, l = categories.length; i < l ; i++) {\r\n            var ct = categories[i];\r\n            if (ct.type) types.push(ct.type);\r\n            if (ct.dataType) dataTypes.push(ct.dataType);\r\n        }\r\n        var cThis = this;\r\n        $.post('GetServices', {\r\n            types: types,\r\n            dataTypes: dataTypes,\r\n            searchText: searchText\r\n        }, function (rt) {\r\n            if (rt.ErrorMessage) {\r\n                commonTool.info.showError(rt.ErrorMessage);\r\n            }\r\n            else {\r\n                var services = rt.Data;\r\n                cThis.setState({ services: services });\r\n            }\r\n        }, 'json');\r\n    }\r\n\r\n    render() {\r\n        var services = this.state.services;\r\n        var total = services.length;\r\n        var cServices = [];\r\n        for (var i = 0, l = services.length; i < l ; i++) {\r\n            cServices.push(<ServiceResultItem item={services[i] } />);\r\n        }\r\n\r\n        return (\r\n        <div className=\"service-result\">\r\n            <div className=\"service-result-total\">共找到 <span>{total}</span> 个服务</div>\r\n            <div className=\"service-result-list\">\r\n                {cServices}\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ServiceResultItem extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n    }\r\n\r\n    onError() {\r\n        this.refs.img.src = _bl_ + \"/Reference/image/none-picture.png\";\r\n    }\r\n\r\n    render() {\r\n        var item = this.props.item;\r\n        var title = item.Name;\r\n        var type = item.ServiceType;\r\n        var description = item.Description;\r\n        var address = item.Address;\r\n        var metadata = item.MetaData;\r\n        var img = item.ImageUrl ? (_bl_ + item.ImageUrl) : null;\r\n\r\n        return (\r\n        <div className=\"service-item clearfix\">\r\n            <h3 className=\"service-item-title\">{title}</h3>\r\n            <div style={{ marginTop: '10px' }} className=\"clearfix\">\r\n                <img ref=\"img\" onError={this.onError.bind(this)} src={img} />\r\n                <div className=\"service-item-content\">\r\n                    <div>服务类型：{type}</div>\r\n                    <div>服务简介：{description}</div>\r\n                    <div>服务地址：{address}</div>\r\n                    <div>服务元数据：{metadata}</div>\r\n                </div>\r\n            </div>\r\n        </div>);\r\n    }\r\n}"],"names":[],"mappings":"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"}