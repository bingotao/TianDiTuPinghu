{"version":3,"file":"E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Map\\PathPlanning\\BusPlanning.jsx","sourceRoot":null,"sources":["E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Map\\PathPlanning\\BusPlanning.jsx"],"sourcesContent":["class BusLine extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.index = 1;\r\n    }\r\n\r\n    render() {\r\n        var bl = this.props.busLine;\r\n        var line = bl.Line;\r\n        switch (bl.Type) {\r\n            case 1:\r\n                return (\r\n                    <div className=\"busline-item\"><span className=\"iconfont icon-iconfontjiaotongiconwalk\"></span>步行 <span className=\"enhance\">{line.Distance}({line.Time})</span> 到达 <span className=\"enhance\">{bl.EndStation.Name}</span></div>\r\n                    );\r\n            case 2:\r\n            case 3:\r\n                return (\r\n                    <div className=\"busline-item\">\r\n                        <div className=\"enhance\"><span className=\"iconfont icon-gongjiao\"></span>{line.Direction}({line.StationCount}站)</div>\r\n                        <div className=\"busline-station\">\r\n                            <div>\r\n                                <span className=\"iconfont icon-station\"></span>\r\n                                <span>{bl.StartStation.Name}</span>\r\n                                <span className=\"enhance\"> 上车</span>\r\n                            </div>\r\n                            <div>\r\n                                <span className=\"iconfont icon-station\"></span>\r\n                                <span>{bl.EndStation.Name}</span>\r\n                                <span className=\"enhance\"> 下车</span>\r\n                            </div>\r\n                            <div className=\"enhance\">运营时间：{line.WorkTime}</div>\r\n                        </div>\r\n                    </div>\r\n                    );\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n}\r\n\r\nclass BusPanning extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {\r\n            detailsOn: props.detailsOn\r\n        };\r\n    }\r\n\r\n    toggleDetails() {\r\n        this.setState({\r\n            detailsOn: !this.state.detailsOn\r\n        });\r\n    }\r\n\r\n    render() {\r\n        var bp = this.props.busPanning;\r\n\r\n        var trs = [];\r\n        if (bp && bp.TransferBuses) {\r\n            var trsBuses = bp.TransferBuses;\r\n            for (var i = 0, l = trsBuses.length; i < l; i++) {\r\n                var item = trsBuses[i];\r\n                if (i != l - 1)\r\n                    trs.push(<span><span><span className=\"iconfont icon-gongjiao\"></span>{item}</span> <span className=\"iconfont icon-right\"></span></span>);\r\n                else\r\n                    trs.push(<span><span><span className=\"iconfont icon-gongjiao\"></span>{item}</span></span>);\r\n            }\r\n\r\n            var busLines = [];\r\n\r\n            var lines = bp.BusLines;\r\n            for (var i = 0, l = lines.length; i < l; i++) {\r\n                busLines.push(<BusLine busLine={lines[i] } />);\r\n            }\r\n            } else {\r\n                bp = {};\r\n            }\r\n\r\n        return (\r\n            <div className={\"bus-panning\" + (this.state.detailsOn ? \" active\" : \"\")}>\r\n                <div onClick={e=>this.props.parent.showDetails(this.props.index)} className={\"bus-panning-sp\" + (this.state.detailsOn ? \" active\" : \"\")}>\r\n                <span className=\"btn-buspanning-details\"><antd.Icon type={this.state.detailsOn ? \"up\" : \"down\"} /></span>\r\n                <div className=\"bus-panning-simple\">{trs}</div>\r\n                <div className=\"bus-panning-simple-detail\">\r\n                {bp.TotalTime}({bp.TotalDistance}，{bp.TransferCount == 0 ? \"无换乘\" : \"换乘\" + bp.TransferCount + \"次\"})\r\n                </div>\r\n                </div>\r\n                <div className={\"bus-panning-details \" + (this.state.detailsOn ? \" active\" : \"\" )}>\r\n                   <div className=\"bus-panning-details-start\"><antd.Icon type=\"environment\" />起点</div>{busLines}\r\n                   <div className=\"bus-panning-details-end\"><antd.Icon type=\"environment\" />终点</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass BusPanningResultPanel extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.parent = props.parent;\r\n        this.state = {\r\n            showDetailsIndex: 0\r\n        }\r\n    }\r\n\r\n    showDetails(index) {\r\n        this.setState({ showDetailsIndex: index });\r\n    }\r\n\r\n    drawPath(dp) {\r\n\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        var pgs = this.props.plannings;\r\n        var plannings = [];\r\n        if (pgs) {\r\n            for (var i = 0, l = pgs.length; i < l; i++) {\r\n                plannings.push(<BusPanning parent={this} index={i} detailsOn={this.state.showDetailsIndex === i} busPanning={pgs[i] } />);\r\n            }\r\n\r\n            if (l === 0) {\r\n                plannings = <div className=\"busplaning-nonetip\">未找到合适的公交线路</div>;\r\n            }\r\n        } else {\r\n            plannings = <div></div>;\r\n        }\r\n        return (\r\n            <div>\r\n                {plannings}\r\n            </div>);\r\n    }\r\n}"],"names":[],"mappings":"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"}