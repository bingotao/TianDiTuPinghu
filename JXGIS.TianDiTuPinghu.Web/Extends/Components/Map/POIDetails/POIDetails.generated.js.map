{"version":3,"file":"E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Map\\POIDetails\\POIDetails.jsx","sourceRoot":null,"sources":["E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Map\\POIDetails\\POIDetails.jsx"],"sourcesContent":["class POIDetailImg extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    onImgError() {\r\n        this.refs.img.src = _bl_ + \"/Reference/image/none-picture.png\";\r\n    }\r\n\r\n    render() {\r\n        var img = this.props.imgUrl;\r\n        return (\r\n             <img ref=\"img\" onError={this.onImgError.bind(this)} className=\"poidetail-img\" src={img } />\r\n         );\r\n    }\r\n}\r\n\r\nclass POIDetailsPanel extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            show: false\r\n        };\r\n    }\r\n\r\n    hidden() {\r\n        this.setState({ show: false });\r\n        if (this.props.onHidden) {\r\n            this.props.onHidden();\r\n        }\r\n    }\r\n\r\n    showPOIDeails(poi) {\r\n        var item = poi || {};\r\n        item.show = true;\r\n        this.setState(item);\r\n        _g.appCenter.hidden();\r\n    }\r\n\r\n    correcting() {\r\n        var map = this.props.map;\r\n        var point = this.state.LNGLAT;\r\n        var poi_id = this.state.FEATUREGUID;\r\n        map.createCorrecting(point, poi_id);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var clipboard = new Clipboard(this.refs.copyAddress);\r\n\r\n        clipboard.on('success', function (e) {\r\n            _g.fun.showSuccess('分享地址复制成功！');\r\n        });\r\n    }\r\n\r\n    getPosition() {\r\n        var poi = this.state;\r\n        return {\r\n            name: poi.SHORTNAME,\r\n            point: {\r\n                y: this.state.LNGLAT.lat,\r\n                x: this.state.LNGLAT.lng\r\n            },\r\n            center: false\r\n        };\r\n    }\r\n\r\n    setRouteStart() {\r\n        _g.appCenter.show('0');\r\n        _g.routePlanning.setStart(this.getPosition());\r\n    }\r\n\r\n    setRouteEnd() {\r\n        _g.appCenter.show('0');\r\n        _g.routePlanning.setEnd(this.getPosition());\r\n    }\r\n\r\n    render() {\r\n        var item = this.state;\r\n\r\n        var images = item.PHOTO ? item.PHOTO.split(\";\") : [_bl_ + \"/Reference/image/none-picture.png\"];\r\n        var imgs = [];\r\n\r\n        for (var i = 0, l = images.length; i < l; i++) {\r\n            imgs.push(<div><POIDetailImg imgUrl={images[i] } /></div>);\r\n        }\r\n\r\n        var address = window.location.origin + _bl_ + '/Map/Index?poishare=' + this.state.FEATUREGUID;\r\n        return (\r\n            <div className={\"poidetails-panel \" + (item.show ? \"active\" : \"\")}>\r\n                <antd.Button onClick={e=>this.hidden()} type=\"close\" icon=\"left\">返回</antd.Button>\r\n                <antd.Carousel autoplay={true} effect=\"fade\">\r\n                    {imgs}\r\n                </antd.Carousel>\r\n                <div className=\"poidetails-info\">\r\n                    <div>{item.SHORTNAME}</div>\r\n                    <div><antd.Icon type=\"environment\" /> {item.ADDRESS}</div>\r\n                    <div><antd.Icon type=\"phone\" /> {item.PHONE}</div>\r\n                    <div className=\"poidetails-route\">\r\n                        <antd.Button onClick={this.setRouteStart.bind(this)} type=\"primary\">从此出发<antd.Icon type=\"arrow-right\" /></antd.Button>\r\n                        <antd.Button onClick={this.setRouteEnd.bind(this)} type=\"primary\">到达此处<antd.Icon type=\"arrow-left\" /></antd.Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"poidetails-tools\">\r\n                    <span onClick={e=>this.props.map.createAreaSearch(this.state.LNGLAT)}><antd.Icon type=\"search\" /> 搜附近</span>\r\n                    <span><button ref='copyAddress' data-clipboard-text={address }><antd.Icon type=\"share-alt\" /> 分享</button></span>\r\n                    <span onClick={this.correcting.bind(this)}><antd.Icon type=\"file-excel\" /> 纠错</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}"],"names":[],"mappings":"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"}