{"version":3,"file":"E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Map\\Correcting\\Correcting.jsx","sourceRoot":null,"sources":["E:\\工作\\Code\\07 天地图·平湖\\TianDiTu-PingHu - 副本\\JXGIS.TianDiTuPinghu.Web\\Extends\\Components\\Map\\Correcting\\Correcting.jsx"],"sourcesContent":["class Correcting extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        var errortypes = {\r\n            '0': '位置错误',\r\n            '1': '名称错误',\r\n            '9': '其他错误'\r\n        };\r\n        this.errortypes = errortypes;\r\n        this.layer = props.layer;\r\n\r\n        this.state = {\r\n            poi_id: props.poi_id,\r\n            errortype: errortypes['0'],\r\n            errordescription: '',\r\n            contactinfo: '',\r\n            x: props.x,\r\n            y: props.y\r\n        };\r\n    }\r\n\r\n    errorTypeChange(e) {\r\n        this.setState({\r\n            errortype: e.target.value,\r\n        });\r\n    }\r\n\r\n    commit() {\r\n        var cThis = this;\r\n        $.post('CreateCorrecting', this.state, function (rt) {\r\n            if (rt.ErrorMessage) {\r\n                _g.fun.showError(rt.ErrorMessage);\r\n            } else {\r\n                _g.fun.showSuccess('纠错信息已成功反馈，我们将及时处理并反馈！');\r\n                cThis.layer.remove();\r\n            }\r\n        }, 'json');\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <div className='correcting'>\r\n            <h3>地图纠错</h3>\r\n            <h4>错误类型</h4>\r\n    <div className=\"error-types\">\r\n            <antd.Radio.Group onChange={this.errorTypeChange.bind(this)} value={this.state.errortype}>\r\n                <antd.Radio value={this.errortypes['0'] }>{this.errortypes['0']}</antd.Radio>\r\n                <antd.Radio value={this.errortypes['1'] }>{this.errortypes['1']}</antd.Radio>\r\n                <antd.Radio value={this.errortypes['9'] }>{this.errortypes['9']}</antd.Radio>\r\n            </antd.Radio.Group>\r\n    </div>\r\n            <h4>错误描述</h4>\r\n            <textarea className=\"ct-input\" type=\"text\" placeholder=\"错误描述信息\" value={this.state.errordescription} onChange={e=>this.setState({ errordescription: e.target.value })}></textarea>\r\n            <h4>联系方式</h4>\r\n            <input className=\"ct-input\" type=\"text\" placeholder=\"有奖纠错，请留下您的联系方式\" value={this.state.contactinfo} onChange={e=>this.setState({ contactinfo: e.target.value })} />\r\n            <div className=\"correcting-btns clearfix\">\r\n                <antd.Button onClick={e=> { if (this.layer) this.layer.remove() }}>取消</antd.Button>\r\n                <antd.Button onClick={this.commit.bind(this)} type=\"primary\">确定</antd.Button>\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nCorrecting.create = function (layer, poi_id) {\r\n    var dom = document.createElement('div');\r\n    var latlng = layer.getLatLng();\r\n    var correcting = ReactDOM.render(<Correcting poi_id={poi_id} x={latlng.lng} y={latlng.lat} layer={layer } />, dom);\r\n    correcting.dom = dom;\r\n    return correcting;\r\n}"],"names":[],"mappings":"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"}